{
  "identity": {
    "id": "rsi",
    "label": "RSI (Relative Strength Index)",
    "category": "Momentum",
    "tier": "CORE",
    "tags": ["Momentum", "Oscillator", "Overbought/Oversold", "Mean Reversion", "Breakout Filter"]
  },
  "docs": {
    "blurb": "RSI measures the speed and magnitude of recent price changes to identify overbought and oversold conditions.",
    "longSummary": "The Relative Strength Index (RSI) oscillates between 0 and 100 and compares average gains to average losses over a lookback period. Readings above an upper threshold often suggest overbought conditions, while readings below a lower threshold may indicate oversold conditions. Traders use RSI for mean reversion entries, momentum confirmations, divergence analysis, and as a regime filter. Combining RSI with trend filters (e.g., EMA) can help avoid counter-trend signals. Adaptive thresholding and multi-timeframe confirmation are common enhancements.",
    "mathSummary": "RSI = 100 − [100 / (1 + RS)], where RS = (Avg Gain over N) / (Avg Loss over N), typically using Wilder’s smoothing.",
    "references": [
      {
        "label": "Investopedia — Relative Strength Index (RSI)",
        "url": "https://www.investopedia.com/terms/r/rsi.asp"
      }
    ]
  },
  "params": [
    {
      "key": "length",
      "label": "RSI Length",
      "type": "integer",
      "default": 14,
      "min": 2,
      "max": 200,
      "step": 1,
      "unit": "bars"
    },
    {
      "key": "source",
      "label": "Price Source",
      "type": "enum",
      "options": ["close", "hl2", "hlc3", "ohlc4"],
      "default": "close"
    },
    {
      "key": "upper",
      "label": "Overbought Level",
      "type": "number",
      "default": 70,
      "min": 50,
      "max": 95,
      "step": 0.5
    },
    {
      "key": "lower",
      "label": "Oversold Level",
      "type": "number",
      "default": 30,
      "min": 5,
      "max": 50,
      "step": 0.5
    },
    {
      "key": "middle",
      "label": "Midline",
      "type": "number",
      "default": 50,
      "min": 0,
      "max": 100,
      "step": 0.5
    },
    {
      "key": "smooth",
      "label": "Apply Wilder Smoothing",
      "type": "boolean",
      "default": true
    }
  ],
  "outputs": ["rsi"],
  "supportedOperators": [">", ">=", "<", "<=", "==", "crosses_above", "crosses_below", "rising", "falling", "within", "outside"],
  "signals": [
    {
      "id": "bull_reversion",
      "label": "Bullish Mean Reversion",
      "when": [
        {"left": "rsi", "op": "crosses_above", "right": "lower"}
      ]
    },
    {
      "id": "bear_reversion",
      "label": "Bearish Mean Reversion",
      "when": [
        {"left": "rsi", "op": "crosses_below", "right": "upper"}
      ]
    },
    {
      "id": "momentum_long",
      "label": "Momentum Long",
      "when": [
        {"left": "rsi", "op": ">", "right": "middle"},
        {"left": "rsi", "op": "rising", "right": null}
      ]
    },
    {
      "id": "momentum_short",
      "label": "Momentum Short",
      "when": [
        {"left": "rsi", "op": "<", "right": "middle"},
        {"left": "rsi", "op": "falling", "right": null}
      ]
    }
  ],
  "ui": {
    "tooltips": {
      "_indicator": "RSI oscillates between 0–100 to gauge overbought/oversold and momentum shifts.",
      "length": "Lookback for average gains/losses (Wilder). Longer = smoother, slower.",
      "source": "Price input for RSI calculation.",
      "upper": "Level often used to flag overbought conditions.",
      "lower": "Level often used to flag oversold conditions.",
      "middle": "Midline (usually 50) for momentum bias.",
      "smooth": "Use Wilder-style smoothing to reduce noise."
    }
  },
  "constraints": {
    "recommendedTimeframes": ["15m", "1h", "4h", "1D"],
    "notes": "Shorter timeframes may require wider thresholds or filters to reduce noise."
  },
  "examples": [
    { "name": "RSI 14 Mean Reversion (70/30)", "presetRef": "rsi_normal_reversion_14" },
    { "name": "RSI 7 Aggressive Bounce (80/20)", "presetRef": "rsi_normal_bounce_7" },
    { "name": "RSI 21 Momentum Filter", "presetRef": "rsi_normal_momentum_21" },
    { "name": "RSI Hero: Pullback + EMA Filter", "presetRef": "rsi_hero_pullback_ema" },
    { "name": "RSI Hero: Momentum + Cooldown", "presetRef": "rsi_hero_momentum_cd" },
    { "name": "RSI Hero: Mean Reversion + MTF Confirm", "presetRef": "rsi_hero_reversion_mtf" }
  ],
  "riskTemplates": {
    "atrStop": {
      "enabledDefault": false,
      "tooltip": "Places stop a multiple of ATR from entry.",
      "params": {
        "atrPeriod": 14,
        "atrMult": 1.5
      }
    },
    "trailingTP": {
      "enabledDefault": false,
      "tooltip": "Locks in profits with a trailing take-profit.",
      "params": {
        "type": "percent",
        "percent": 0.7
      }
    },
    "breakeven": {
      "enabledDefault": false,
      "tooltip": "Moves stop to entry after a defined unrealized gain.",
      "params": {
        "triggerPercent": 1.0,
        "offsetPercent": 0.05
      }
    },
    "timeStop": {
      "enabledDefault": false,
      "tooltip": "Exits after a fixed number of bars.",
      "params": {
        "maxBars": 120
      }
    }
  },
  "presets": [
    {
      "id": "rsi_normal_reversion_14",
      "name": "RSI 14 Mean Reversion (70/30)",
      "presetTier": "Normal",
      "riskProfile": "Balanced",
      "designIntent": "MeanReversion",
      "extras": [],
      "indicators": [
        { "id": "rsi", "params": { "length": 14, "source": "close", "upper": 70, "lower": 30, "middle": 50, "smooth": true } }
      ],
      "entry": {
        "long": [
          {"left": "rsi", "op": "crosses_above", "right": "lower"}
        ],
        "short": [
          {"left": "rsi", "op": "crosses_below", "right": "upper"}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": ">=", "right": "middle"}
        ],
        "short": [
          {"left": "rsi", "op": "<=", "right": "middle"}
        ]
      },
      "riskDefaults": {}
    },
    {
      "id": "rsi_normal_bounce_7",
      "name": "RSI 7 Aggressive Bounce (80/20)",
      "presetTier": "Normal",
      "riskProfile": "Aggressive",
      "designIntent": "Pullback",
      "extras": [],
      "indicators": [
        { "id": "rsi", "params": { "length": 7, "source": "close", "upper": 80, "lower": 20, "middle": 50, "smooth": true } }
      ],
      "entry": {
        "long": [
          {"left": "rsi", "op": "<=", "right": "lower"},
          {"left": "rsi", "op": "rising", "right": null}
        ],
        "short": [
          {"left": "rsi", "op": ">=", "right": "upper"},
          {"left": "rsi", "op": "falling", "right": null}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": "outside", "right": [45, 65]}
        ],
        "short": [
          {"left": "rsi", "op": "outside", "right": [35, 55]}
        ]
      },
      "riskDefaults": {}
    },
    {
      "id": "rsi_normal_momentum_21",
      "name": "RSI 21 Momentum Filter",
      "presetTier": "Normal",
      "riskProfile": "Conservative",
      "designIntent": "Filter",
      "extras": [],
      "indicators": [
        { "id": "rsi", "params": { "length": 21, "source": "close", "upper": 70, "lower": 30, "middle": 50, "smooth": true } },
        { "id": "ema", "params": { "length": 200, "source": "close" } }
      ],
      "entry": {
        "long": [
          {"left": "rsi", "op": ">", "right": "middle"},
          {"left": "price", "op": ">", "right": "ema"}
        ],
        "short": [
          {"left": "rsi", "op": "<", "right": "middle"},
          {"left": "price", "op": "<", "right": "ema"}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": "crosses_below", "right": "middle"}
        ],
        "short": [
          {"left": "rsi", "op": "crosses_above", "right": "middle"}
        ]
      },
      "riskDefaults": {}
    },
    {
      "id": "rsi_hero_pullback_ema",
      "name": "RSI Hero: Pullback + EMA Filter",
      "presetTier": "Hero",
      "riskProfile": "Balanced",
      "designIntent": "Pullback",
      "extras": ["confirmationIndicator", "riskGuard"],
      "indicators": [
        { "id": "rsi", "params": { "length": 14, "source": "close", "upper": 75, "lower": 25, "middle": 50, "smooth": true } },
        { "id": "ema", "params": { "length": 100, "source": "close" } }
      ],
      "extrasConfig": {
        "confirmationIndicator": {
          "id": "ema",
          "mode": "trendFilter",
          "rule": {"left": "price", "op": ">", "right": "ema"}
        },
        "riskGuard": {
          "maxOpenPositions": 5,
          "dailyMaxDrawdownPct": 6.0
        }
      },
      "entry": {
        "long": [
          {"left": "rsi", "op": "<=", "right": "lower"},
          {"left": "rsi", "op": "rising", "right": null},
          {"left": "price", "op": ">", "right": "ema"}
        ],
        "short": [
          {"left": "rsi", "op": ">=", "right": "upper"},
          {"left": "rsi", "op": "falling", "right": null},
          {"left": "price", "op": "<", "right": "ema"}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": ">=", "right": 55}
        ],
        "short": [
          {"left": "rsi", "op": "<=", "right": 45}
        ]
      },
      "riskDefaults": {
        "atrStop": { "enabledDefault": false, "params": { "atrPeriod": 14, "atrMult": 1.8 } },
        "trailingTP": { "enabledDefault": false, "params": { "type": "percent", "percent": 0.8 } },
        "breakeven": { "enabledDefault": false, "params": { "triggerPercent": 1.2, "offsetPercent": 0.05 } },
        "timeStop": { "enabledDefault": false, "params": { "maxBars": 96 } }
      }
    },
    {
      "id": "rsi_hero_momentum_cd",
      "name": "RSI Hero: Momentum + Cooldown",
      "presetTier": "Hero",
      "riskProfile": "Aggressive",
      "designIntent": "Momentum",
      "extras": ["signalCooldown", "priority"],
      "indicators": [
        { "id": "rsi", "params": { "length": 10, "source": "close", "upper": 65, "lower": 35, "middle": 50, "smooth": true } }
      ],
      "extrasConfig": {
        "signalCooldown": {
          "bars": 12
        },
        "priority": {
          "tier": 2
        }
      },
      "entry": {
        "long": [
          {"left": "rsi", "op": "crosses_above", "right": "middle"},
          {"left": "rsi", "op": "rising", "right": null}
        ],
        "short": [
          {"left": "rsi", "op": "crosses_below", "right": "middle"},
          {"left": "rsi", "op": "falling", "right": null}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": ">=", "right": "upper"}
        ],
        "short": [
          {"left": "rsi", "op": "<=", "right": "lower"}
        ]
      },
      "riskDefaults": {
        "trailingTP": { "enabledDefault": false, "params": { "type": "percent", "percent": 1.0 } },
        "timeStop": { "enabledDefault": false, "params": { "maxBars": 72 } }
      }
    },
    {
      "id": "rsi_hero_reversion_mtf",
      "name": "RSI Hero: Mean Reversion + MTF Confirm",
      "presetTier": "Hero",
      "riskProfile": "Conservative",
      "designIntent": "MeanReversion",
      "extras": ["multiTFConfirm", "timeWindow"],
      "indicators": [
        { "id": "rsi", "params": { "length": 14, "source": "close", "upper": 70, "lower": 30, "middle": 50, "smooth": true } }
      ],
      "extrasConfig": {
        "multiTFConfirm": {
          "higherTF": "4h",
          "rule": {"left": "rsi", "op": ">", "right": "middle"}
        },
        "timeWindow": {
          "session": "Any",
          "active": true
        }
      },
      "entry": {
        "long": [
          {"left": "rsi", "op": "<", "right": 35},
          {"left": "rsi", "op": "rising", "right": null}
        ],
        "short": [
          {"left": "rsi", "op": ">", "right": 65},
          {"left": "rsi", "op": "falling", "right": null}
        ]
      },
      "exit": {
        "long": [
          {"left": "rsi", "op": "outside", "right": [45, 60]}
        ],
        "short": [
          {"left": "rsi", "op": "outside", "right": [40, 55]}
        ]
      },
      "riskDefaults": {
        "atrStop": { "enabledDefault": false, "params": { "atrPeriod": 14, "atrMult": 1.6 } },
        "breakeven": { "enabledDefault": false, "params": { "triggerPercent": 0.9, "offsetPercent": 0.03 } },
        "timeStop": { "enabledDefault": false, "params": { "maxBars": 144 } }
      }
    }
  ],
  "deprecated": false
}
