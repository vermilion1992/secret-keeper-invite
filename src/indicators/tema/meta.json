{
  "identity": {
    "id": "tema",
    "label": "TEMA (Triple Exponential Moving Average)",
    "category": "Trend",
    "tier": "CORE",
    "tags": ["Trend", "Moving Average", "Fast Response", "Low Lag"]
  },
  "docs": {
    "blurb": "TEMA is a triple-smoothed EMA that reduces lag while maintaining smoothness.",
    "longSummary": "The Triple Exponential Moving Average applies exponential smoothing three times to reduce noise and lag more effectively than single or double EMAs. TEMA responds faster to price changes while maintaining smoothness, making it suitable for trend following and crossover strategies.",
    "mathSummary": "TEMA = 3×EMA₁ - 3×EMA₂ + EMA₃, where EMA₁ is EMA of price, EMA₂ is EMA of EMA₁, EMA₃ is EMA of EMA₂.",
    "references": [
      {
        "label": "Technical Analysis — TEMA",
        "url": "https://www.investopedia.com/terms/t/tema.asp"
      }
    ]
  },
  "params": [
    {
      "key": "length",
      "label": "TEMA Length",
      "type": "integer",
      "default": 21,
      "min": 2,
      "max": 200,
      "step": 1,
      "unit": "bars"
    },
    {
      "key": "source",
      "label": "Price Source",
      "type": "enum",
      "options": ["close", "open", "high", "low", "hl2", "hlc3", "ohlc4"],
      "default": "close"
    }
  ],
  "outputs": ["tema"],
  "supportedOperators": [">", ">=", "<", "<=", "==", "crosses_above", "crosses_below", "rising", "falling"],
  "signals": [
    {
      "id": "bull_price_cross",
      "label": "Bullish Price Crosses Above TEMA",
      "when": [
        { "left": "price", "op": "crosses_above", "right": "tema" }
      ]
    },
    {
      "id": "bear_price_cross",
      "label": "Bearish Price Crosses Below TEMA",
      "when": [
        { "left": "price", "op": "crosses_below", "right": "tema" }
      ]
    }
  ],
  "ui": {
    "tooltips": {
      "_indicator": "TEMA reduces lag while maintaining smoothness through triple exponential smoothing.",
      "length": "Period for the triple exponential moving average calculation.",
      "source": "Price input for TEMA calculation."
    }
  },
  "constraints": {
    "recommendedTimeframes": ["5m", "15m", "1h", "4h"],
    "notes": "TEMA works best in trending markets and may generate more whipsaws in sideways conditions."
  },
  "examples": [
    { "name": "TEMA 21 Trend Follow", "presetRef": "tema_normal_trend_21" },
    { "name": "TEMA Hero: Fast Breakout", "presetRef": "tema_hero_breakout" }
  ],
  "riskTemplates": {
    "atrStop": {
      "enabledDefault": false,
      "tooltip": "Places stop a multiple of ATR from entry.",
      "params": { "atrPeriod": 14, "atrMult": 1.5 }
    },
    "trailingTP": {
      "enabledDefault": false,
      "tooltip": "Locks in profits with a trailing take-profit.",
      "params": { "type": "percent", "percent": 1.0 }
    },
    "breakeven": {
      "enabledDefault": false,
      "tooltip": "Moves stop to entry after a defined unrealized gain.",
      "params": { "triggerPercent": 1.0, "offsetPercent": 0.05 }
    },
    "timeStop": {
      "enabledDefault": false,
      "tooltip": "Exits after a fixed number of bars.",
      "params": { "maxBars": 100 }
    }
  },
  "presets": [
    {
      "id": "tema_normal_trend_21",
      "name": "TEMA 21 Trend Follow",
      "presetTier": "Normal",
      "riskProfile": "Balanced",
      "designIntent": "Momentum",
      "extras": [],
      "indicators": [
        { "id": "tema", "params": { "length": 21, "source": "close" } }
      ],
      "entry": {
        "long": [
          { "left": "price", "op": "crosses_above", "right": "tema" },
          { "left": "tema", "op": "rising", "right": null }
        ],
        "short": [
          { "left": "price", "op": "crosses_below", "right": "tema" },
          { "left": "tema", "op": "falling", "right": null }
        ]
      },
      "exit": {
        "long": [
          { "left": "price", "op": "crosses_below", "right": "tema" }
        ],
        "short": [
          { "left": "price", "op": "crosses_above", "right": "tema" }
        ]
      },
      "riskDefaults": {}
    },
    {
      "id": "tema_hero_breakout",
      "name": "TEMA Hero: Fast Breakout",
      "presetTier": "Hero",
      "riskProfile": "Aggressive",
      "designIntent": "Breakout",
      "extras": ["signalCooldown"],
      "indicators": [
        { "id": "tema", "params": { "length": 14, "source": "close" } }
      ],
      "extrasConfig": {
        "signalCooldown": { "bars": 5 }
      },
      "entry": {
        "long": [
          { "left": "price", "op": "crosses_above", "right": "tema" },
          { "left": "tema", "op": "rising", "right": null }
        ],
        "short": [
          { "left": "price", "op": "crosses_below", "right": "tema" },
          { "left": "tema", "op": "falling", "right": null }
        ]
      },
      "exit": {
        "long": [
          { "left": "price", "op": "<=", "right": "tema" }
        ],
        "short": [
          { "left": "price", "op": ">=", "right": "tema" }
        ]
      },
      "riskDefaults": {
        "atrStop": { "enabledDefault": false, "params": { "atrPeriod": 14, "atrMult": 1.8 } },
        "trailingTP": { "enabledDefault": false, "params": { "type": "percent", "percent": 1.2 } },
        "timeStop": { "enabledDefault": false, "params": { "maxBars": 80 } }
      }
    }
  ],
  "deprecated": false
}